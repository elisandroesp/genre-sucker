var request = require('request');
var OAuth   = require('./oauth-1.0a');

var oauth = new OAuth({
    consumer: {
        public: 'lcd5cj41o1o0bbu4ixlegcv3',
        secret: '63ei5olk44'
    }
});

/*
// Obtaining Temporary Credentials
var request_data = {
    url: 'https://openapi.etsy.com/v2/oauth/request_token?scope=email_r',
    method: 'POST'
};

request({
    url: request_data.url,
    method: request_data.method,
    form: oauth.authorize(request_data)
}, function(err, res, data) {
    console.log(data);
    //data
    //login_url=https%3A%2F%2Fwww.etsy.com%2Foauth%2Fsignin%3Foauth_consumer_key%3Dlcd5cj41o1o0bbu4ixlegcv3%26oauth_token%3D3840a619dfab443649884be242d372%26service%3Dv2_prod&oauth_token=3840a619dfab443649884be242d372&oauth_token_secret=cb0b16b410&oauth_callback_confirmed=true&oauth_consumer_key=lcd5cj41o1o0bbu4ixlegcv3&oauth_callback=oob
    // {
    //     login_url: 'https://www.etsy.com/oauth/signin?oauth_consumer_key=lcd5cj41o1o0bbu4ixlegcv3&oauth_token=3840a619dfab443649884be242d372&service=v2_prod',
    //     oauth_token: '3840a619dfab443649884be242d372',
    //     service: 'v2_prod',
    //     oauth_token_secret: 'cb0b16b410',
    //     oauth_callback_confirmed: 'true',
    //     oauth_consumer_key: 'lcd5cj41o1o0bbu4ixlegcv3',
    //     oauth_callback: 'oob'
    // }
});
*/

//access the login_url to get the credential

/*
var request_data = {
    url: 'https://openapi.etsy.com/v2/oauth/access_token',
    method: 'POST',
    data: {
        oauth_verifier: '5c719a80'
    }
};

var token = {
    public: '0ae903946b8b12cc9c141d98c74165',
    secret: 'b102ca7fe5'
}

request({
    url: request_data.url,
    method: request_data.method,
    form: oauth.authorize(request_data, token)
}, function(err, res, data) {
    // oauth_token=292ad7a4707946df20d7627382e446&oauth_token_secret=91b3ad182d
});
*/

/*
var request_data = {
    url: 'https://openapi.etsy.com/v2/users/__SELF__',
    method: 'GET'
};

var token = {
    public: '292ad7a4707946df20d7627382e446',
    secret: '91b3ad182d'
}

request({
    url: request_data.url,
    qs: oauth.authorize(request_data, token),
    json: true
}, function(err, res, data) {
    // {
    //     count: 1,
    //     results: [{
    //         user_id: 53899516,
    //         login_name: 'ddooo',
    //         primary_email: 'joeddo89@gmail.com',
    //         creation_tsz: 1411796074,
    //         referred_by_user_id: null,
    //         feedback_info: [Object],
    //         awaiting_feedback_count: 0
    //     }],
    //     params: {
    //         user_id: '__SELF__'
    //     },
    //     type: 'User',
    //     pagination: {}
    // }
});
*/